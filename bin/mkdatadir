#!/bin/csh
#
#  $Id: mkdatadir,v 1.38 2005-06-05 03:52:27 brandenb Exp $
#
#  This script generates a link to a data directory
#  with the same name as the current working directory
#  but that is located on a data disk. The name of the
#  desired data disk will be different and different
#  machine, so you may need to add your particular
#  machine name below
#
#  Note: to make user specific directory options, follow
#  an example by searching for "$USER".
#
echo $cwd >! .tmp
#
#  in the following if block one can add more machines
#  where workspace can be allocated.
#
set hn = `hostname`
echo "we are on" $hn ", the new workspace will be"
if ($hn =~ mhd*.st-and.ac.uk) then
  set str='s/home/work2/g'
else if (($hn =~ fe*) && ($USER =~ brandenb)) then
  echo "special entry for Axel"
  set str='s/people\/disk2/wkspace3/g'
else if ($hn =~ fe*) then
  set str='s/people\/disk2/wkspace3/g'
else if ($hn =~ ns0*) then
  set str='s/home/data/g'
else if ($hn =~ ns1*) then
  set str='s/home/data/g'
else if ($hn =~ sander*) then
  set str='s/astro/scratch1\/astro/g'
else if ($hn =~ nq*.nordita.dk) then
  #set str='s/home/nq1\/data/g'
  set str='s/home/data/g'
else if ($hn =~ nl0) then
  set str='s/home\/mattias\/pencil-code\/runs/var\/tmp/g'
else if ($hn =~ nl3) then
  set str='s/home/scr/g'
else if (($hn =~ nl11) || ($hn =~ wormhole)) then
  set str='s/home/data/g'
  #set str='s/brandenb/brandenb\/storage/g'
else if (($hn =~ nl6) ) then
  set str='s/home/wkspace2/g'
else if ($hn =~ tac*) then
  set str='s/usr\/tac/scratch/g'
else if ($hn =~ embla) then
  set str='s/home\/u./work/g'
else if ($hn =~ giga*) then
  set str='s/home/work/g'
else if (($hn =~ gridur) && ($USER =~ nilshau))then
  echo "special entry for Nils Erland" 
  echo $cwd/data >! .tmp
  set str='s/home\/u./mnt\/mldwork2\/work2/g'
else if ($hn =~ gridur) then
  set str='s/home\/u./work/g'
else if ($hn =~ nw17) then
  set str='s/home/var\/tmp/g'
else if ($hn =~ nw*) then
  set str='s/home/data/g'
else if ($hn =~ fire) then
  echo $cwd/data >! .tmp
  set str='s/home\/parallab\/ntnu/work/g'
else if ($hn =~ login*) then
  echo $cwd/data >! .tmp
  set str='s/home/disk\/global/g'
else if ($hn =~ *.phys.ntnu.no) then
  set str='s/home\/gudrun/work\/erland/g'
else if (($hn =~ copson*) && ($USER =~ mee)) then
  set str='s/raid3\/mee/home\/mee\/WORK_DIRECTORY\/data/g'
else if (($hn =~ copson*) && ($USER =~ asnod)) then
  set str='s/$/\/data/g'
else if ($hn =~ linux*) then
  set str='s/users\/physik\/physik/scratch/g'
else if (($hn =~ obelix*) && ($USER =~ svart)) then
  echo "special entry for Mike"
  set str='s/home/b/g'
else if ($hn =~ obelix*) then
  set str='s/home/export\/obelix1/g'
else if ($hn =~ psi24*) then
  set str='s/afs\/ipp-garching\.mpg\.de\/home\/a/u/g'
else
  set str='s/home/var\/tmp/g'
endif
#echo $str
#
sed -e $str .tmp >! .scr
cat .scr
mkdir -p `cat .scr`
ln -s `cat .scr` data
#Tidy up temporary files
rm -f .scr .tmp
